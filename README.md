Задание 1. Анализ и планирование

**Описание функциональности монолитного приложения**

Система обеспечивает управление отоплением умного дома. В текущей кодовой базе есть проблемы, не позволяющие в полной мере восстановить картину взаимодействия всех компонентов и функций системы, поэтому далее могут быть предположения.

Функциональность текущего приложения:
1. Контроль температуры (пользователь может получить данные температуры, вероятно, в отдельном приложении (сайте) или на самом устройстве)
2. Управление температурой (пользователь может управлять температурой, вероятно, в отдельном приложении или через механическое устройство/вентиль)
3. Администрирование сенсоров: регистрация и обслуживание (регистрация при включении, обслуживание мастером на дому)

**Анализ архитектуры монолитного приложения**

Архитектура системы представляет собой монолитное решение с единым компонентом (если под компонентом понимать единицу сборки), написанное на Go. Для хранения данных используется реляционная база данных PostgreSQL.  Взаимодействие с секретами приложения осуществляется через операционную систему, секреты базы данных заданы в docker-compose.yml.
Все коммуникации системы – синхронные. Сервер выступает активной стороной, опрашивая состояние устройств, своего рода long  polling'ом.
При публикации система недоступна, так как обновляется целиком

**Определение доменов и границ контекстов**

Текущее решение небольшое с ограниченными функциональными возможностями, для себя выделяю один *домен - *теплый дом**.

Контексты определены исходя из соотношения функционала системы и используемого языка (ubiquitous language)
* Контекст управления теплым домом (контроль температуры, управление температурой)
* Контекст поддержки теплого дома (регистрация и обслуживание устройств)

**Проблемы монолитного решения**

Текущее решение удовлетворяло требования бизнеса до момента масштабирования. Потенциальные проблемы, которые могут возникнуть при расширении системы:  

* Невозможность масштабирования отдельных функций системы под разную нагрузку

* Высокое количество лишних запросов от сервера и задержки (из-за синхронного взаимодействия и опроса устройств сервером). При росте количества устройств подход активного сервера (опрашивающего) становится неадекватным.

* Проблемы с работой нескольких разработчиков над общей кодовой базой

* Проблемы с несовместимостью наборов нефункциональных требований при росте функционала разных модулей/устройств, например, управление воротами требует повышенного контроля, управление видео требует широкого пропускного канала и, вероятно, учета data residency (разные требования к хранению и администрированию записей).

* Если изначальная версия приложения была on-premise (предположение), то этот факт может также служить ограничителем при необходимости быстро адаптировать приложение под новые реалии.

Визуализация контекста системы - диаграмма С4:
[link]

